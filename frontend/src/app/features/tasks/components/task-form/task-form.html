<form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <!-- TITULO -->
    <div>
        <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">Task Title <span
                class="text-red-500">*</span></label>
        <input formControlName="title" type="text" placeholder="e.g. Buy groceries"
            class="w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-stefanini-blue/20 focus:border-stefanini-blue transition-all" />
        @if (taskForm.get('title')?.invalid && taskForm.get('title')?.touched) {
        <span class="text-[10px] text-red-500 mt-1">Title is required (min 3 chars)</span>
        }
    </div>

    <!-- DESCRIPCIÃ“N -->
    <div>
        <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">Description <span
                class="text-slate-300 font-normal">(Optional)</span></label>
        <textarea formControlName="description" rows="3" placeholder="Add any details, notes..."
            class="w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-stefanini-blue/20 focus:border-stefanini-blue transition-all resize-none"></textarea>
    </div>

    <!-- STATUS SELECTION -->
    <div>
        <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">Initial Status</label>
        <select formControlName="status"
            class="w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none bg-white appearance-none cursor-pointer">
            @for (status of statusOptions; track status) {
            <option [value]="status">{{ status }}</option>
            }
        </select>
    </div>

    <!-- BOTONES -->
    <div class="flex items-center justify-end gap-3 pt-2">
        <button type="button" (click)="onCancel.emit()"
            class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg transition-colors">
            Cancel
        </button>

        <button type="submit" [disabled]="taskForm.invalid || isSubmitting()"
            class="bg-stefanini-blue hover:bg-blue-700 disabled:opacity-50 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-md transition-all flex items-center gap-2">
            @if (isSubmitting()) {
            <!-- Spinner animado de Tailwind -->
            <svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                </path>
            </svg>
            <span>Saving...</span>
            } @else {
            <span>{{ submitButtonText() }}</span>
            }
        </button>

    </div>
</form>